<!-- The Modal -->
<div class="modal" id="myModal" [ngClass]="{show: showModal}">
  <div class="modal-dialog">
    <div class="modal-content">
      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Ajouter un formateur</h4>
        <button type="button" class="close" (click)="showModal=false" data-dismiss="modal">&times;</button>
      </div>
      <!-- Modal body -->

      <div class="modal-body">
        <div class="form-group row">
          <label for="name" class="col-md-4 col-form-label text-md-right">Nom</label>
          <div class="col-md-6">
            <input id="name" class="form-control" type="text" name="name" [(ngModel)]="current_Formateur.name">
          </div>
        </div>
        <div class="form-group row">
          <label for="firstname" class="col-md-4 col-form-label text-md-right">Prénom</label>

          <div class="col-md-6">
            <input id="firstname" class="form-control" type="text" name="firstname"
                   [(ngModel)]="current_Formateur.firstname">
          </div>
        </div>

        <div class="form-group row">
          <label for="dateNais" class="col-md-4 col-form-label text-md-right">Date de naissance</label>

          <div class="col-md-8">
            <input id="dateNais" class="form-control" type="date" [(ngModel)]="current_Formateur.dateNais">
          </div>
        </div>

        <div class="form-group row">
          <label for="cin" class="col-md-4 col-form-label text-md-right">CIN</label>
          <div class="col-md-8">
            <input id="cin" type="text" class="form-control" [(ngModel)]="current_Formateur.cin">
          </div>
        </div>
        <div class="form-group row">
          <label for="email" class="col-md-4 col-form-label text-md-right">Adresse E-mail</label>

          <div class="col-md-8">
            <input id="email" type="email" class="form-control" [(ngModel)]="current_Formateur.email">
          </div>
        </div>
        <div class="form-group row">
          <label for="adresse" class="col-md-4 col-form-label text-md-right">Adresse</label>
          <div class="col-md-8">
            <input id="adresse" type="adresse" class="form-control" [(ngModel)]="current_Formateur.adresse">
          </div>
        </div>
        <!--<div class="form-group row">
          <label class="col-md-4 col-form-label text-md-right">Role</label>
          <div class="col-md-8">
            &lt;!&ndash;<input id="role" type="" class="form-control" [(ngModel)]="current_Formateur.adresse">&ndash;&gt;
            <select name="role" id="role" [(ngModel)]="current_Formateur.role" style="width: 286px; height: 39px;">
              <option *ngFor="let role of listRole" [value]="role.id">{{role.text}}</option>
            </select>
          </div>
        </div>-->
        <div class="form-group row">
          <label for="password" class="col-md-4 col-form-label text-md-right">Mot de passe</label>

          <div class="col-md-8">
            <input id="password" type="password" class="form-control" [(ngModel)]="current_Formateur.password">
          </div>
        </div>
      </div>
      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" (click)="showModal=false;crud_operation.is_visible=false"
                data-dismiss="modal">Annuler
        </button>
        <button type="button" class="btn btn-info" (click)="save();">Enregistrer</button>
      </div>
    </div>
  </div>
</div>

<!-- header formateur  -->

<div class="header-body">
  <div class="card card-stats">
    <h1 style="text-align: center;">
      La liste des formateurs </h1>
  </div>
</div>
<!-- ---------------------------------test api  -->
<div>
  <div class="card-header bg-white border-0">
    <div class="row align-items-center">
      <div class="col-8">
      </div>
      <div class="col-4 text-right">
        <button routerLinkActive="router-link-active"
                class="btn btn-sm btn-primary" (click)="showModal=true; new(); this.getRole();">Ajouter un formateur
        </button>
      </div>
    </div>
  </div>
  <div class="panel panel-primary">
    <!--<div class="table-responsive">
      <table class="table align-items-center table-dark table-flush">
        <thead class="thead-dark">
        <tr>
          <th scope="col">Id</th>
          <th scope="col">Nom</th>
          <th scope="col">Prénom</th>
          <th scope="col">Date naissance</th>
          <th scope="col">CIN</th>
          <th scope="col">E-mail</th>
          <th></th>
          <th></th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let row of data">
          <td>{{row.id}}</td>
          <td>{{row.name}}</td>
          <td>{{row.firstname}}</td>
          <td>{{row.dateNais}}</td>
          <td>{{row.cin}}</td>
          <td>{{row.email}}</td>
          <td class="text-right">
            <div *ngIf="!row.confirm">
              <button class="btn btn-warning" (click)="edit(row);showModal=true; this.getRole()">Modifier</button>
              <button class="btn btn-danger" (click)="row.confirm = true">Supprimer</button>
            </div>
            <div *ngIf="row.confirm">
              <button class="btn btn-success" (click)="delete(row.id)">Confirmer</button>
              |
              <button class="btn btn-danger" (click)="row.confirm === false">Annuler</button>
            </div>
          </td>
        </tr>
        </tbody>
      </table>
      <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center">
          <li class="page-item disabled">
            <a class="page-link" href="#" tabindex="-1">
              <i class="fa fa-angle-left"></i>
              <span class="sr-only">Previous</span>
            </a>
          </li>
          <li class="page-item"><a class="page-link" href="#">1</a></li>
          <li class="page-item active"><a class="page-link" href="#">2</a></li>
          <li class="page-item"><a class="page-link" href="#">3</a></li>
          <li class="page-item">
            <a class="page-link" href="#">
              <i class="fa fa-angle-right"></i>
              <span class="sr-only">Next</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>-->
    <p-table  #dt
              [columns]="cols"
              [value]="data"
              (onPage)="data.length"
              [paginator]="true"
              [rows]="5"
              [rowsPerPageOptions]="[5,10,20,50,100]"
              [totalRecords]="data.length"
              [globalFilterFields]="cols"
              [loading]="loading"
              [scrollable]="false"
              [resizableColumns]="true"
              [style]="{width:'100%'}">
      <ng-template pTemplate="paginatorleft" let-state>
        <b>Total des lignes: {{dt._totalRecords}}</b>
      </ng-template>
      <ng-template pTemplate="caption">
        <div style="text-align:left">
          <input type="text" pInputText size="20" placeholder="Filtre Général"
                 (input)="dt.filterGlobal($event.target['value'], 'contains')" class="form-control"
                 style="width:auto;">
        </div>
        <div style="text-align:right">

        </div>
      </ng-template>
      <ng-template pTemplate="header" let-columns>
        <tr>
          <th *ngFor="let col of columns">
            {{col.header}}
          </th>
        </tr>
      </ng-template>
      <ng-template let-columns let-index="colIndex" pTemplate="header">
        <tr >
          <!-- <th *ngIf="win.innerWidth<1700" width="40px"></th>-->
          <th *ngFor="let col of columns" [ngSwitch]="col.field" [pSortableColumn]="col.field"
              class={{col.class}} pResizableColumn>
            {{col.header}}
            <p-sortIcon *ngIf="col.field!=='action'" [field]="col.field"
                        ariaLabel="Activate to sort"
                        ariaLabelDesc="Activate to sort in descending order"
                        ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
          </th>
        </tr>
        <tr>
          <th *ngFor="let col of columns" [ngSwitch]="col.field" class={{col.class}}>
            <input size="10"  *ngIf="col.field!=='action'&&col.field!=='dateNais'"
                   pInputText type="text" class="form-control "
                   (input)="dt.filter($event.target['value'], col.field,'contains')">
            <input size="10"  *ngIf="col.field==='dateNais'"
                   pInputText type="date" class="form-control "
                   (input)="dt.filter($event.target['value'], col.field,'contains')">

          </th>
        </tr>

      </ng-template>
      <ng-template pTemplate="body" let-rowData let-columns="columns">
        <tr>
          <td *ngFor="let col of columns">
            <sapn *ngIf="col.field==='action'">
              <button class="btn btn-danger" (click)="confirmDelete(rowData)"><i class="fas fa-trash-alt"></i></button>
              <button class="btn btn-warning" (click)="confirmEdit(rowData)">
                <i class="fas fa-user-edit"></i>
              </button>
            </sapn>
            <span *ngIf="col.field !== 'action'">
                 {{rowData[col.field]}}
            </span>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
<p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle"></p-confirmDialog>
